# 文件上传系统

一个简单易部署的本地文件上传系统，支持50人左右的压缩文件上传。

## 功能特点

- 🎯 基于50人名单的文件上传系统
- 👥 **每人限制一个文件**，防止重复上传
- 🔄 **支持文件更新/替换**，可随时修改已上传文件
- 📊 **实时统计信息**，显示上传进度和未上传人员
- 🔍 **未上传学生列表**，清晰显示还需上传的人员
- 📁 支持多种压缩文件格式 (.zip, .rar, .7z, .tar, .gz)
- 📱 响应式设计，支持手机和电脑访问
- 🚀 实时上传进度显示
- 💾 本地文件存储
- 🔒 基本的文件类型验证

## 技术栈

- **前端**: HTML5, CSS3, JavaScript (ES6+)
- **后端**: Node.js + Express.js
- **文件上传**: Multer
- **存储**: 本地文件系统

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 创建学生名单文件

在项目根目录创建 `classmate.txt` 文件，每行一个学生姓名：

```
张三
李四
王五
...
```

### 3. 启动服务

```bash
# 生产环境
npm start

# 开发环境（自动重启）
npm run dev
```

### 4. 访问系统

打开浏览器访问: `http://localhost:3000`

## 文件结构

```
zippy-file-collector/
├── index.html          # 主页面
├── style.css           # 样式文件
├── script.js           # 前端逻辑
├── server.js           # 后端服务器
├── package.json        # 项目配置
├── classmate.txt       # 学生名单（需创建）
├── README.md          # 说明文档
├── uploads/           # 上传文件目录（自动创建）
└── file_metadata.json # 文件元数据（自动创建）
```

## 使用说明

### 上传文件

1. 在下拉菜单中选择你的姓名
2. 点击"选择文件"按钮选择压缩文件
3. 可选：填写文件描述
4. 点击"上传文件"按钮
5. 等待上传完成

### 更新已上传文件

1. 选择已经上传过文件的姓名
2. 系统会自动显示当前已上传的文件信息
3. 选择新的文件替换旧文件
4. 可选：修改文件描述
5. 点击"更新文件"按钮完成替换

### 查看统计信息

- **上传统计**：实时显示已上传/未上传人数和完成率
- **未上传学生列表**：显示所有还未上传文件的学生姓名
- **完成进度条**：直观显示整体上传进度

### 查看文件

- 页面下方会显示所有已上传的文件
- 点击"刷新列表"按钮获取最新文件列表
- 文件按上传时间倒序排列
- 更新的文件会显示"更新于"时间

## 配置说明

### 支持的文件类型

- .zip
- .rar
- .7z
- .tar
- .gz

### 限制设置

- **每人限制**: 每个学生只能上传一个文件
- **最大文件大小**: 100MB
- **并发上传**: 支持多用户同时上传
- **存储位置**: `./uploads/` 目录
- **文件更新**: 支持随时替换已上传文件

### 自定义配置

可以在 `server.js` 中修改以下配置：

```javascript
const MAX_FILE_SIZE = 100 * 1024 * 1024; // 最大文件大小
const PORT = 3000; // 端口号
const allowedExtensions = ['.zip', '.rar', '.7z', '.tar', '.gz']; // 允许的文件类型
```

## 部署说明

### 本地部署

1. 确保已安装 Node.js (版本 >= 14)
2. 下载项目文件
3. 创建 `classmate.txt` 文件，每行一个学生姓名
4. 在项目目录运行 `npm install`
5. 运行 `npm start`
6. 访问 `http://localhost:3000`

### 服务器部署

1. 在服务器上安装 Node.js
2. 克隆或上传项目文件
3. 创建 `classmate.txt` 文件
4. 运行 `npm install --production`
5. 使用 PM2 管理进程（推荐）：

```bash
npm install -g pm2
pm2 start server.js --name "file-upload-system"
pm2 startup
pm2 save
```
6. 确保防火墙开放 3000 端口

## 注意事项

### 数据备份

- 定期备份 `uploads/` 目录和 `file_metadata.json` 文件
- 建议设置自动备份脚本
- 文件更新时旧文件会被自动删除

### 安全考虑

- 当前版本为简化版本，适合内网使用
- 如需公网访问，建议添加身份验证
- 建议配置防火墙限制访问
- 每人限制一个文件可以有效防止恶意上传

### 使用建议

- 教师可以通过"未上传学生列表"快速了解完成情况
- 学生可以随时更新自己的文件，系统会保留最新版本
- 统计信息实时更新，无需手动刷新页面

### 性能优化

- 大量文件时可考虑使用数据库存储元数据
- 可添加文件搜索和分类功能
- 支持批量上传可进一步提升效率
- 可考虑添加文件下载和预览功能

## 故障排除

### 常见问题

1. **无法上传文件**
   - 检查文件格式是否支持
   - 确认文件大小不超过100MB
   - 检查 `uploads/` 目录权限

2. **页面无法访问**
   - 确认服务器已启动
   - 检查端口是否被占用
   - 确认防火墙设置

3. **学生名单不显示**
   - 检查 `classmate.txt` 文件是否已创建
   - 确认文件编码为UTF-8
   - 检查每行一个姓名的格式

### 日志查看

服务器日志会显示在控制台中，包括：
- 上传请求
- 错误信息
- 文件操作记录

## 更新日志

### v2.0.0

- ✨ **每人限制一个文件**功能
- ✨ **文件更新/替换**功能，支持随时修改
- ✨ **实时统计信息**显示上传进度
- ✨ **未上传学生列表**功能
- ✨ 增强的用户界面和交互体验
- 🐛 修复文件名编码问题
- 🎨 优化样式和响应式设计

### v1.0.0

- ✨ 初始版本发布
- ✨ 支持基于名单的文件上传
- ✨ 支持多种压缩文件格式
- ✨ 响应式设计
- ✨ 实时上传进度
- ✨ 文件列表展示

## 技术支持

如有问题或建议，请联系开发团队或提交issue。